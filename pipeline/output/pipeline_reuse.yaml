apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: parallel-full-data-generation-and-evaluation-
  namespace: pipeline
spec:
  entrypoint: parallel-full-data-generation-and-evaluation
  serviceAccountName: argo-workflow-sa
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  templates:
  - name: parallel-full-data-generation-and-evaluation
    steps:
    - - name: generate-name
        template: call-generate-name-service
      - name: generate-birthday
        template: call-generate-birthday-service
      - name: generate-address
        template: call-generate-address-service
    - - name: generate-id
        template: call-generate-id-service
    - - name: data-preprocess
        template: call-data-preprocess-service
    - - name: synthetic-generator
        template: call-synthetic-generator-service
    - - name: data-quality
        template: call-data-quality-service
    - - name: privacy-tracking
        template: call-privacy-tracking-service
  - name: call-generate-name-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-name.pipeline.svc.cluster.local:8082/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-name_input_1a605092
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-name_output_75104eff
      - -F
      - n_rows=100
      - -F
      - mf_ratio=0.5
      - -F
      - output_path=/mnt/data/argo-shard/generate-name/names.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-birthday-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-birthday.pipeline.svc.cluster.local:8086/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-birthday_input_81e5e752
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-birthday_output_2a8f5730
      - -F
      - n_rows=100
      - -F
      - min_age=18
      - -F
      - max_age=80
      - -F
      - output_path=/mnt/data/argo-shard/generate-birthday/birthdays.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-address-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-address.pipeline.svc.cluster.local:8085/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-address_input_aa4b9e9f
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-address_output_fed41532
      - -F
      - n_rows=100
      - -F
      - output_path=/mnt/data/argo-shard/generate-address/addresses.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-id-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-id.pipeline.svc.cluster.local:8087/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-id_input_2fdf6386
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_generate-id_output_9598ca05
      - -F
      - name_csv=/mnt/data/argo-shard/generate-name/names.csv
      - -F
      - birthday_csv=/mnt/data/argo-shard/generate-birthday/birthdays.csv
      - -F
      - output_path=/mnt/data/argo-shard/generate-id/id_data.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-data-preprocess-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://data-preprocess.pipeline.svc.cluster.local:8083/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_data-preprocess_input_d16f18be
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_data-preprocess_output_7071d264
      - -F
      - input_path=/mnt/data/argo-shard/generate-id/id_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - handle_missing=mean
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-synthetic-generator-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://synthetic-generator.pipeline.svc.cluster.local:8090/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_synthetic-generator_input_bd41fbd3
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_synthetic-generator_output_314c90e1
      - -F
      - input_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - num_samples=1000
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-data-quality-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://data-quality.pipeline.svc.cluster.local:8084/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_data-quality_input_fb0c7fda
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_data-quality_output_688d856c
      - -F
      - real_data_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/data-quality/quality_report.json
      - -F
      - metrics=similarity,distribution
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-privacy-tracking-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://privacy-tracking.pipeline.svc.cluster.local:8089/run
      - -F
      - input_dir=/mnt/data/parallel-full-data-generation-and-evaluation_privacy-tracking_input_ffede15c
      - -F
      - output_dir=/mnt/data/parallel-full-data-generation-and-evaluation_privacy-tracking_output_bdd58ed3
      - -F
      - real_data_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/privacy-tracking/privacy_report.json
      - -F
      - risk_metric=membership_inference
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
---
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: synthesize-only-
  namespace: pipeline
spec:
  entrypoint: synthesize-only
  serviceAccountName: argo-workflow-sa
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  templates:
  - name: synthesize-only
    steps:
    - - name: load-data
        template: call-load-data-service
    - - name: synthetic-generator
        template: call-synthetic-generator-service
  - name: call-load-data-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://load-data.pipeline.svc.cluster.local:8092/run
      - -F
      - input_dir=/mnt/data/synthesize-only_load-data_input_1b636149
      - -F
      - output_dir=/mnt/data/synthesize-only_load-data_output_57b30685
      - -F
      - input_dir=/mnt/data/argo-shard/load-data
      - -F
      - output_json=/mnt/data/argo-shard/load-data/output.json
      - -F
      - output_csv=/mnt/data/argo-shard/load-data/output.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-synthetic-generator-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://synthetic-generator.pipeline.svc.cluster.local:8090/run
      - -F
      - input_dir=/mnt/data/synthesize-only_synthetic-generator_input_0233ad9d
      - -F
      - output_dir=/mnt/data/synthesize-only_synthetic-generator_output_5fd122d5
      - -F
      - input_path=/mnt/data/argo-shard/load-data/output.csv
      - -F
      - output_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - num_samples=500
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
---
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: evaluation-only-
  namespace: pipeline
spec:
  entrypoint: evaluation-only
  serviceAccountName: argo-workflow-sa
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  templates:
  - name: evaluation-only
    steps:
    - - name: load-real-data
        template: call-load-real-data-service
      - name: load-synthetic-data
        template: call-load-synthetic-data-service
    - - name: data-quality
        template: call-data-quality-service
      - name: privacy-tracking
        template: call-privacy-tracking-service
  - name: call-load-real-data-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://load-data.pipeline.svc.cluster.local:8092/run
      - -F
      - input_dir=/mnt/data/evaluation-only_load-data_input_cf316b61
      - -F
      - output_dir=/mnt/data/evaluation-only_load-data_output_c2f84a0c
      - -F
      - input_path=/mnt/data/argo-shard/real-data/real_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/load-data/real_data_loaded.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-load-synthetic-data-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://load-data.pipeline.svc.cluster.local:8092/run
      - -F
      - input_dir=/mnt/data/evaluation-only_load-data_input_68860a43
      - -F
      - output_dir=/mnt/data/evaluation-only_load-data_output_ec6c400e
      - -F
      - input_path=/mnt/data/argo-shard/synthetic-data/synthetic_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/load-data/synthetic_data_loaded.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-data-quality-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://data-quality.pipeline.svc.cluster.local:8084/run
      - -F
      - input_dir=/mnt/data/evaluation-only_data-quality_input_ddaaa3b3
      - -F
      - output_dir=/mnt/data/evaluation-only_data-quality_output_aecd00f2
      - -F
      - real_data_path=/mnt/data/argo-shard/load-data/real_data_loaded.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/load-data/synthetic_data_loaded.csv
      - -F
      - output_path=/mnt/data/argo-shard/data-quality/quality_report.json
      - -F
      - metrics=similarity,distribution
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-privacy-tracking-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://privacy-tracking.pipeline.svc.cluster.local:8089/run
      - -F
      - input_dir=/mnt/data/evaluation-only_privacy-tracking_input_5438797d
      - -F
      - output_dir=/mnt/data/evaluation-only_privacy-tracking_output_b7577e4b
      - -F
      - real_data_path=/mnt/data/argo-shard/load-data/real_data_loaded.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/load-data/synthetic_data_loaded.csv
      - -F
      - output_path=/mnt/data/argo-shard/privacy-tracking/privacy_report.json
      - -F
      - risk_metric=membership_inference
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
---
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: full-data-generation-and-evaluation-
  namespace: pipeline
spec:
  entrypoint: full-data-generation-and-evaluation
  serviceAccountName: argo-workflow-sa
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  templates:
  - name: full-data-generation-and-evaluation
    steps:
    - - name: generate-name
        template: call-generate-name-service
    - - name: generate-birthday
        template: call-generate-birthday-service
    - - name: generate-address
        template: call-generate-address-service
    - - name: generate-id
        template: call-generate-id-service
    - - name: data-preprocess
        template: call-data-preprocess-service
    - - name: synthetic-generator
        template: call-synthetic-generator-service
    - - name: data-quality
        template: call-data-quality-service
    - - name: privacy-tracking
        template: call-privacy-tracking-service
  - name: call-generate-name-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-name.pipeline.svc.cluster.local:8082/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_generate-name_input_55583c75
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_generate-name_output_335071b7
      - -F
      - n_rows=100
      - -F
      - mf_ratio=0.5
      - -F
      - output_path=/mnt/data/argo-shard/generate-name/names.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-birthday-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-birthday.pipeline.svc.cluster.local:8086/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_generate-birthday_input_f0ed5fe5
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_generate-birthday_output_640b8bbe
      - -F
      - n_rows=100
      - -F
      - min_age=18
      - -F
      - max_age=80
      - -F
      - output_path=/mnt/data/argo-shard/generate-birthday/birthdays.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-address-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-address.pipeline.svc.cluster.local:8085/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_generate-address_input_e54b8698
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_generate-address_output_6512f94a
      - -F
      - n_rows=100
      - -F
      - output_path=/mnt/data/argo-shard/generate-address/addresses.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-generate-id-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://generate-id.pipeline.svc.cluster.local:8087/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_generate-id_input_ae581b43
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_generate-id_output_6420c65a
      - -F
      - name_csv=/mnt/data/argo-shard/generate-name/names.csv
      - -F
      - birthday_csv=/mnt/data/argo-shard/generate-birthday/birthdays.csv
      - -F
      - output_path=/mnt/data/argo-shard/generate-id/id_data.csv
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-data-preprocess-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://data-preprocess.pipeline.svc.cluster.local:8083/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_data-preprocess_input_191a6af6
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_data-preprocess_output_6154860d
      - -F
      - input_path=/mnt/data/argo-shard/generate-id/id_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - handle_missing=mean
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-synthetic-generator-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://synthetic-generator.pipeline.svc.cluster.local:8090/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_synthetic-generator_input_03c37e86
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_synthetic-generator_output_86c5cb16
      - -F
      - input_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - num_samples=1000
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-data-quality-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://data-quality.pipeline.svc.cluster.local:8084/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_data-quality_input_f9f4bbab
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_data-quality_output_6f29a91b
      - -F
      - real_data_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/data-quality/quality_report.json
      - -F
      - metrics=similarity,distribution
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
  - name: call-privacy-tracking-service
    container:
      image: curlimages/curl:7.85.0
      command:
      - curl
      - -X
      - POST
      - http://privacy-tracking.pipeline.svc.cluster.local:8089/run
      - -F
      - input_dir=/mnt/data/full-data-generation-and-evaluation_privacy-tracking_input_6e7b054c
      - -F
      - output_dir=/mnt/data/full-data-generation-and-evaluation_privacy-tracking_output_8686fb4b
      - -F
      - real_data_path=/mnt/data/argo-shard/data-preprocess/clean_data.csv
      - -F
      - synthetic_data_path=/mnt/data/argo-shard/synthetic-generator/synthetic_data.csv
      - -F
      - output_path=/mnt/data/argo-shard/privacy-tracking/privacy_report.json
      - -F
      - risk_metric=membership_inference
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data
