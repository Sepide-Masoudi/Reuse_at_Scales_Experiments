# TODO : rebuild data-quality image
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: parallel-full-data-generation-and-evaluation-
  namespace: no-reuse-pipeline
  labels:
    batch: no-reuse
spec:
  entrypoint: parallel-full-data-generation-and-evaluation
  serviceAccountName: argo-workflow-sa
  nodeSelector:
    baremetal: "true"
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  - name: temp-volume
    emptyDir:
      sizeLimit: 1Gi
      
  templates:
  - name: parallel-full-data-generation-and-evaluation
    steps:
    - - name: generate-name
        template: generate-name-parallel-full-data-generation-and-evaluation
      - name: generate-birthday
        template: generate-birthday-parallel-full-data-generation-and-evaluation
      - name: generate-address
        template: generate-address-parallel-full-data-generation-and-evaluation
    - - name: generate-id
        template: generate-id-parallel-full-data-generation-and-evaluation
    - - name: data-preprocess
        template: data-preprocess-parallel-full-data-generation-and-evaluation
    - - name: synthetic-generator
        template: synthetic-generator-parallel-full-data-generation-and-evaluation
    - - name: privacy-tracking
        template: privacy-tracking-parallel-full-data-generation-and-evaluation
      - name: data-quality
        template: data-quality-parallel-full-data-generation-and-evaluation


  - name: generate-name-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-names:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--mf_ratio","0.5","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-name/names.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-birthday-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-birthday:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--min_age","18","--max_age","80","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-birthday/birthdays.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-address-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-address:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-address/addresses.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-id-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-id-code:latest
      command: ["python","main.py"]
      args: ["--name_csv","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-name/names.csv","--birthday_csv","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-birthday/birthdays.csv","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-id/id_data.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "300Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: data-preprocess-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-data-preprocessor:latest
      command: ["python","main.py"]
      args: ["--input_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-generate-id/id_data.csv","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--metadata_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/metadata.json","--handle_missing","mean"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "300Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: synthetic-generator-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-synthetic-generator:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/metadata.json","--input_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--num_samples","1000"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
        limits:
          cpu: "500m"
          memory: "1Gi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: data-quality-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-data-quality:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/metadata.json","--real_data_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--synthetic_data_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-quality/quality_report.json","--method","realistic","--output_dir","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-quality/quality_report_HTML.html"]      
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "768Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "1Gi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp


  - name: privacy-tracking-parallel-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-privacy-tracking:latest
      command: ["python","main.py"]
      args: ["--real_data_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--synthetic_data_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--output_path","/mnt/data/argo-shard/parallel-full-data-generation-and-evaluation-privacy-tracking/privacy_report.json"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "768Mi"
          ephemeral-storage: "500Mi"
        limits:
          cpu: "500m"
          memory: "1Gi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

---

apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: synthesize-only-
  namespace: no-reuse-pipeline
  labels:
    batch: batch1
spec:
  entrypoint: synthesize-only
  serviceAccountName: argo-workflow-sa
  nodeSelector:
    baremetal: "true"
  volumes:
    - name: shared-data
      persistentVolumeClaim:
        claimName: argo-shard-pvc
    - name: temp-volume
      emptyDir:
        sizeLimit: 1Gi

  templates:
  - name: synthesize-only
    steps:
      - - name: load-data
          template: load-data-synthesize-only
      - - name: synthetic-generator
          template: synthetic-generator-synthesize-only

  - name: load-data-synthesize-only
    container:
      image: sepidmas/noreuse_scale-load-data:latest
      command: ["python", "main.py"]
      args:
        - "--input_dir"
        - "/app/data/input"
        - "--output_dir"
        - "/mnt/data/argo-shard/synthesize-only-load-data"

      env:
        - name: TMPDIR
          value: /tmp
        - name: TEMP
          value: /tmp
        - name: TMP
          value: /tmp

      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"

      volumeMounts:
        - name: shared-data
          mountPath: /mnt/data/argo-shard
        - name: temp-volume
          mountPath: /tmp

  - name: synthetic-generator-synthesize-only
    container:
      image: sepidmas/noreuse_scale-synthetic-generator:latest
      command: ["python", "main.py"]
      args:
        - "--input_path"
        - "/mnt/data/argo-shard/synthesize-only-load-data/real-data.csv"
        - "--metadata_path"
        - "/mnt/data/argo-shard/synthesize-only-load-data/meta-data.json"
        - "--output_path"
        - "/mnt/data/argo-shard/synthesize-only-synthetic-generator/synthetic_data.csv"
        - "--num_samples"
        - "1000"

      env:
        - name: TMPDIR
          value: /tmp
        - name: TEMP
          value: /tmp
        - name: TMP
          value: /tmp

      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"

      volumeMounts:
        - name: shared-data
          mountPath: /mnt/data/argo-shard
        - name: temp-volume
          mountPath: /tmp



---

apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: evaluation-only-
  namespace: no-reuse-pipeline
  labels:
    batch: batch1
spec:
  entrypoint: evaluation-only
  serviceAccountName: argo-workflow-sa
  nodeSelector:
    baremetal: "true"
  volumes:
    - name: shared-data
      persistentVolumeClaim:
        claimName: argo-shard-pvc
    - name: temp-volume
      emptyDir:
        sizeLimit: 1Gi

  templates:
  - name: evaluation-only
    steps:
    - - name: load-data
        template: load-data-evaluation-only
    - - name: data-quality
        template: data-quality-evaluation-only
    - - name: privacy-tracking
        template: privacy-tracking-evaluation-only

  - name: load-data-evaluation-only
    container:
      image: sepidmas/noreuse_scale-load-data:latest
      command: ["python","main.py"]
      args: ["--input_dir","/app/data/input","--output_dir","/mnt/data/argo-shard/evaluation-only-load-data"]
      env:
        - name: TMPDIR
          value: /tmp
        - name: TEMP
          value: /tmp
        - name: TMP
          value: /tmp

      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"

      volumeMounts:
        - name: shared-data
          mountPath: /mnt/data/argo-shard
        - name: temp-volume
          mountPath: /tmp
  - name: data-quality-evaluation-only
    container:
      image: sepidmas/noreuse_scale-data-quality:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/evaluation-only-load-data/meta-data.json","--real_data_path","/mnt/data/argo-shard/evaluation-only-load-data/real-data.csv","--synthetic_data_path","/mnt/data/argo-shard/evaluation-only-load-data/synthetic-data.csv","--output_path","/mnt/data/argo-shard/evaluation-only-data-quality/quality_report.json","--method","realistic","--output_dir","/mnt/data/argo-shard/evaluation-only-data-quality/quality_report_HTML.html"]      
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp

  - name: privacy-tracking-evaluation-only
    container:
      image: sepidmas/noreuse_scale-privacy-tracking:latest
      command: ["python","main.py"]
      args: ["--real_data_path","/mnt/data/argo-shard/evaluation-only-load-data/real-data.csv","--synthetic_data_path","/mnt/data/argo-shard/evaluation-only-load-data/synthetic-data.csv","--output_path","/mnt/data/argo-shard/evaluation-only-privacy-tracking/privacy_report.json"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp  

---

apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: full-data-generation-and-evaluation-
  namespace: no-reuse-pipeline
  labels:
    batch: batch1
spec:
  entrypoint: full-data-generation-and-evaluation
  serviceAccountName: argo-workflow-sa
  nodeSelector:
    baremetal: "true"
  volumes:
  - name: shared-data
    persistentVolumeClaim:
      claimName: argo-shard-pvc
  - name: temp-volume
    emptyDir:
      sizeLimit: 1Gi
      
  templates:
  - name: full-data-generation-and-evaluation
    steps:
    - - name: generate-name
        template: generate-name-full-data-generation-and-evaluation
    - - name: generate-birthday
        template: generate-birthday-full-data-generation-and-evaluation
    - - name: generate-address
        template: generate-address-full-data-generation-and-evaluation
    - - name: generate-id
        template: generate-id-full-data-generation-and-evaluation
    - - name: data-preprocess
        template: data-preprocess-full-data-generation-and-evaluation
    - - name: synthetic-generator
        template: synthetic-generator-full-data-generation-and-evaluation
    - - name: privacy-tracking
        template: privacy-tracking-full-data-generation-and-evaluation
    - - name: data-quality
        template: data-quality-full-data-generation-and-evaluation


  - name: generate-name-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-names:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--mf_ratio","0.5","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-name/names.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-birthday-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-birthday:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--min_age","18","--max_age","80","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-birthday/birthdays.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-address-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-address:latest
      command: ["python","main.py"]
      args: ["--n_rows","1000","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-address/addresses.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: generate-id-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-generate-id-code:latest
      command: ["python","main.py"]
      args: ["--name_csv","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-name/names.csv","--birthday_csv","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-birthday/birthdays.csv","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-id/id_data.csv"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "300Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: data-preprocess-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-data-preprocessor:latest
      command: ["python","main.py"]
      args: ["--input_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-generate-id/id_data.csv","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--metadata_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/metadata.json","--handle_missing","mean"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "300Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: synthetic-generator-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-synthetic-generator:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/metadata.json","--input_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--num_samples","1000"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "512Mi"
          ephemeral-storage: "1Gi"
        limits:
          cpu: "500m"
          memory: "1Gi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

  - name: data-quality-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-data-quality:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/metadata.json","--real_data_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--synthetic_data_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-quality/quality_report.json","--method","realistic","--output_dir","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-quality/quality_report_HTML.html"]      
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp


  - name: privacy-tracking-full-data-generation-and-evaluation
    container:
      image: sepidmas/noreuse_scale-privacy-tracking:latest
      command: ["python","main.py"]
      args: ["--real_data_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-data-preprocess/clean_data.csv","--synthetic_data_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-synthetic-generator/synthetic_data.csv","--output_path","/mnt/data/argo-shard/full-data-generation-and-evaluation-privacy-tracking/privacy_report.json"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "500Mi"
        limits:
          cpu: "500m"
          memory: "1Gi"
          ephemeral-storage: "1Gi"
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp

--- 
       
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: parallel-evaluation-only-
  namespace: no-reuse-pipeline
  labels:
    batch: batch1
spec:
  entrypoint: parallel-evaluation-only
  serviceAccountName: argo-workflow-sa
  nodeSelector:
    baremetal: "true"
  volumes:
    - name: shared-data
      persistentVolumeClaim:
        claimName: argo-shard-pvc
    - name: temp-volume
      emptyDir:
        sizeLimit: 1Gi

  templates:
  - name: parallel-evaluation-only
    steps:
    - - name: load-data
        template: load-data-parallel-evaluation-only
    - - name: data-quality
        template: data-quality-parallel-evaluation-only
      - name: privacy-tracking
        template: privacy-tracking-parallel-evaluation-only

  - name: load-data-parallel-evaluation-only
    container:
      image: sepidmas/noreuse_scale-load-data:latest
      command: ["python","main.py"]
      args: ["--input_dir","/app/data/input","--output_dir","/mnt/data/argo-shard/parallel-evaluation-only-load-data"]
      env:
        - name: TMPDIR
          value: /tmp
        - name: TEMP
          value: /tmp
        - name: TMP
          value: /tmp

      resources:
        requests:
          cpu: "100m"
          memory: "256Mi"
          ephemeral-storage: "200Mi"
        limits:
          cpu: "500m"
          memory: "512Mi"
          ephemeral-storage: "500Mi"

      volumeMounts:
        - name: shared-data
          mountPath: /mnt/data/argo-shard
        - name: temp-volume
          mountPath: /tmp
  - name: data-quality-parallel-evaluation-only
    container:
      image: sepidmas/noreuse_scale-data-quality:latest
      command: ["python","main.py"]
      args: ["--metadata_path","/mnt/data/argo-shard/parallel-evaluation-only-load-data/meta-data.json","--real_data_path","/mnt/data/argo-shard/parallel-evaluation-only-load-data/real-data.csv","--synthetic_data_path","/mnt/data/argo-shard/parallel-evaluation-only-load-data/synthetic-data.csv","--output_path","/mnt/data/argo-shard/parallel-evaluation-only-data-quality/quality_report.json","--method","realistic","--output_dir","/mnt/data/argo-shard/parallel-evaluation-only-data-quality/quality_report_HTML.html"]      
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp

  - name: privacy-tracking-parallel-evaluation-only
    container:
      image: sepidmas/noreuse_scale-privacy-tracking:latest
      command: ["python","main.py"]
      args: ["--real_data_path","/mnt/data/argo-shard/parallel-evaluation-only-load-data/real-data.csv","--synthetic_data_path","/mnt/data/argo-shard/parallel-evaluation-only-load-data/synthetic-data.csv","--output_path","/mnt/data/argo-shard/parallel-evaluation-only-privacy-tracking/privacy_report.json"]
      env:
      - name: TMPDIR
        value: /tmp
      - name: TEMP
        value: /tmp
      - name: TMP
        value: /tmp
      resources:
            requests:
              cpu: "100m"
              memory: "256Mi"
              ephemeral-storage: "100Mi"
            limits:
              cpu: "500m"
              memory: "512Mi"
              ephemeral-storage: "200Mi"      
      volumeMounts:
      - name: shared-data
        mountPath: /mnt/data/argo-shard
      - name: temp-volume
        mountPath: /tmp
        subPath: tmp